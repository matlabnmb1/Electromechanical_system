{% extends "base.html" %}

{% block title %}查看表格记录 - {{ record.name }}{% endblock %}

{% block content %}
<div class="bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold">查看表格记录 - {{ record.name }}</h2>
        <a href="{{ url_for('check_records') }}" class="text-gray-600 hover:text-gray-800">
            <i class="fas fa-times mr-1"></i> 返回
        </a>
    </div>
    
    <div class="mb-6 p-4 bg-blue-50 rounded-md">
        <p class="text-blue-700"><i class="fas fa-info-circle mr-2"></i>所属区队：{{ record.team }}</p>
        <p class="text-blue-700 mt-1"><i class="fas fa-clock mr-2"></i>创建时间：{{ record.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
        <p class="text-blue-700 mt-1"><i class="fas fa-user mr-2"></i>创建者：{{ name }}</p>
    </div>
    
    <div class="space-y-4" id="table-fields">
        <!-- 动态生成的表格字段将在这里显示（只读模式） -->
    </div>
</div>

<!-- 引入Excel风格表格填写界面脚本并配置为只读模式 -->
<script src="{{ url_for('static', filename='excel_style_form.js') }}"></script>
<script>
    // 暴露模板结构数据和记录数据到全局变量
    window.templateStructure = {{ template_structure|tojson|safe }};
    window.recordData = {{ record_data|tojson|safe }};
    // 设置为只读模式
    window.isReadOnly = true;
</script>
{% endblock %}